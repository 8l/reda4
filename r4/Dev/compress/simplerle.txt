| Simple RLE
| PHREDA 2015
| 0XX XX+1.lit
| 1XX DD XX.cpy from HERE-DD
|------------------
^r4/lib/gui.txt


:search | a1 a2 -- cnt
	( c@+ rot c@+ rot | a2 a1 c1 c2
	xor 1? ) nip nip ;

:

:compress | src -- src+ value
	( 1? )( swap
|		searchw 1? (
		swap 1- ) drop
	;

|---------------- decompress
:cpy | dd xx --
	$7f and 2 +
	here rot -
	( swap 1? )( 1- swap c@+ ,c )
	2drop ;

:decompress | end ini --
	( over <? )(
		c@+ -? ( swap c@+ rot cpy )( 1+ ( 1? )( 1- swap c@+ ,c ) drop )
		) 2drop ;

|------------------
#m1 #m1>
#m2	#m2>

:filla
	m1 1000 ( 1? )( 1- 65 rot c!+ swap ) drop 'm1> ! ;

:fillr
	m1 1000 ( 1? )( 1- rand 6 >> rot c!+ swap ) drop 'm1> ! ;

:dumpl |
	( over <? )( c@+ emit ) 2drop ;

:main
	mark
	here dup 'm1 !
	$ffff + dup 'm2 !
	$ffff + 'here !
	filla
	show clrscr
		m1> m1 - "%d bytes" print cr
		 m1> m1 dumpl

		<f1>
		'exit >esc<
		cminiflecha ;

: main ;