^r4/lib/gui.txt
^r4/lib/img.txt
^r4/lib/loadjpg.txt
^r4/lib/loadpng.txt
^r4/lib/trace.txt

^r4/lib/rfont.txt
^../r4/inc/rft/droidsansbold.rft

#marquesina
#tshadow $ffffff
#img1
#img2

|	"ffplay -fs -autoexit -loglevel quiet %s"
#strplay "ffplay -fs -autoexit -loglevel quiet "
#fileplay )( 1024

:playvideo | "" --
	'strplay 'fileplay strcpy
	"""" 'fileplay strcat
	'fileplay strcat
	"""" 'fileplay strcat
	'fileplay
|		memmap
	system drop ;

:waitvideo
	( -1 system -1 <>? )( drop
		100 update drop )
	drop ;

:waitvideo
	show
		'exit >esc<
		-1 system -1 =? ( exit 0 system drop ) drop
	;

:playcartel

	;

|----------------------------------------
:sprint | "" --
	mprint
	ccx ccy ink@
	2 2 +atxy pick3
	tshadow ink printx
	ink atxy
	printx ;

#xm 0
:frente
	xm sh 90 - atxy
	rojo
	marquesina sprint
	-3 'xm +!
	;

:placa1
	sw 'xm !

	0 0 sw sh img1 img.drawsize >xfb

	.restart
	show xfb>scr
		frente
		'exit >esc<
		8000 .mseg exit
		;

:placa2
	sw 'xm !
	0 0 sw sh img2 img.drawsize >xfb
	.restart
	show 'exit >esc<
frente 5000 .mseg exit ;

:seq
	"videos/Spot Vacunación Antigripal 2015 ¿Quiénes deben vacunarse contra la gripe.mp4" playvideo
	waitvideo
	placa1
	"videos/Spot Vacunación Antigripal 2014 ¿Te sentís con gripe.mp4" playvideo
	waitvideo
	placa2
	;

|---------------
:info
	-1 system nip
	-1 =? ( "cartel" )( "video" )
	print cr
	;

:main
|	placa1
seq
	show clrscr

		"SYSteMA de video" print cr
		info

		'exit >esc<

		cminiflecha
|		5000 .mseg
|		0 system drop
|		.restart
		;

:ini
	mark
|	"placas/Calendario_de_vacunas_2014_web_1.jpg" loadjpg 'img1 !
	"placas/Calendario_de_vacunas_2014_web_1.png" loadpng 'img1 !
|	"placas/Campana Vacunacion Antigripal 2015.png" loadpng 'img2 !
	here dup 'marquesina !
	"marquesina.txt" load 'here !
	droidsansbold 64 rfont!

	;

: ini main ;